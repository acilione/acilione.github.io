{"mappings":"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","sources":["<anon>","src/scripts/heron_fountain_simulation.js"],"sourcesContent":["import \"./bubble_simulation.8d2f6bb2.js\";\n\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire0087\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire0087\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\n\nvar $ilwiq = parcelRequire(\"ilwiq\");\nvar $dyjou = parcelRequire(\"dyjou\");\n\nvar $9sWXr = parcelRequire(\"9sWXr\");\n\nvar $5Rd1x = parcelRequire(\"5Rd1x\");\n// =============================================================================\n// PHYSICS IMPLEMENTATION (Ported from Python)\n// =============================================================================\nclass $8482652b5247a78d$var$HeronPhysics {\n    constructor(){\n        // --- Costanti dal codice Python ---\n        this.alpha = 1 / 1024;\n        this.beta = 1 / 502;\n        this.gamma = 1 / 502;\n        this.rho = 1000.0;\n        this.g = 9.8;\n        this.p_atm = 101325.0;\n        this.S_B = 0.0142;\n        this.S_C = 0.0142;\n        this.V_D0 = 0.00355;\n        this.h_B0_ref = 0.04; // Livello di riferimento, non iniziale\n        this.h_C0_ref = 0.21; // Livello di riferimento, non iniziale\n        this.h_6 = 0.33;\n        this.H = 0.25;\n        // Perdite viscose\n        this.eta = 0.001;\n        this.S = 0.0000285;\n        this.L1 = 0.22;\n        this.L2 = 0.31;\n        this.B1 = 8 * Math.PI * this.eta * this.L1 / this.S;\n        this.B2 = 8 * Math.PI * this.eta * this.L2 / this.S;\n        // --- Condizioni iniziali ---\n        this.y0 = [\n            0.06,\n            0.04,\n            0.20\n        ]; // [h_A, h_B, h_C]\n        // --- Condizioni di stop ---\n        this.EPS_DHB = 1e-4;\n        this.T_GUARD = 10.0; // non attivare lo stop prima di 10 s\n        // --- Stato della simulazione ---\n        this.t = 0.0;\n        this.h_A = 0.0;\n        this.h_B = 0.0;\n        this.h_C = 0.0;\n        this.v4 = 0.0; // Velocità del getto (per la visualizzazione)\n        this.isStable = false;\n        this.reset();\n    }\n    reset() {\n        [this.h_A, this.h_B, this.h_C] = this.y0;\n        this.t = 0.0;\n        this.v4 = 0.0;\n        this.isStable = false;\n    }\n    /**\n         * Calcola le derivate [dhA_dt, dhB_dt, dhC_dt]\n         * @returns {number[]} Array delle derivate\n         */ system(h_A, h_B, h_C) {\n        const delta_V = (this.h_B0_ref - h_B) * this.S_B + (this.h_C0_ref - h_C) * this.S_C;\n        const V_D = this.V_D0 + delta_V;\n        const p_D = this.p_atm * this.V_D0 / V_D;\n        const deltaP_AB = this.p_atm - p_D + this.rho * this.g * (h_A + this.H - h_B);\n        const deltaP_C4 = p_D - this.p_atm + this.rho * this.g * (h_C - this.h_6);\n        const v2 = (-this.B1 + Math.sqrt(this.B1 ** 2 + 2 * this.rho * Math.max(deltaP_AB, 0.0))) / this.rho;\n        const v4 = (-this.B2 + Math.sqrt(this.B2 ** 2 + 2 * this.rho * Math.max(deltaP_C4, 0.0))) / this.rho;\n        // Salva v4 per la visualizzazione\n        this.v4 = v4;\n        const dhA_dt = -this.alpha * v2 + this.alpha * v4;\n        const dhB_dt = this.beta * v2;\n        const dhC_dt = -this.gamma * v4;\n        return [\n            dhA_dt,\n            dhB_dt,\n            dhC_dt\n        ];\n    }\n    /**\n         * Esegue un passo di integrazione (Metodo di Eulero)\n         * @param {number} dt - Il passo temporale (delta time)\n         */ step(dt) {\n        if (this.isStable) return;\n        const [dhA_dt, dhB_dt, dhC_dt] = this.system(this.h_A, this.h_B, this.h_C);\n        // Controlla la condizione di stop\n        if (this.t > this.T_GUARD && Math.abs(dhB_dt) < this.EPS_DHB) {\n            this.isStable = true;\n            this.v4 = 0; // Ferma il getto\n            return;\n        }\n        // Integrazione di Eulero\n        this.h_A += dhA_dt * dt;\n        this.h_B += dhB_dt * dt;\n        this.h_C += dhC_dt * dt;\n        this.t += dt;\n        // Assicura che i livelli non diventino negativi\n        this.h_A = Math.max(0, this.h_A);\n        this.h_B = Math.max(0, this.h_B);\n        this.h_C = Math.max(0, this.h_C);\n    }\n}\n// =============================================================================\n// THREE.JS SCENE IMPLEMENTATION\n// =============================================================================\nclass $8482652b5247a78d$var$HeronFountainScene {\n    constructor(containerId = \"scene-container\"){\n        this.container = document.getElementById(containerId);\n        if (!this.container) throw new Error(`Container element with id '${containerId}' not found.`);\n        this.guiParams = {\n            isRunning: false,\n            timeScale: 1.0,\n            viewMode: \"3D\",\n            playPause: ()=>{\n                this.guiParams.isRunning = !this.guiParams.isRunning;\n                this.handlePlayPause();\n            },\n            reset: ()=>{\n                this.resetAll();\n            }\n        };\n        // --- Setup di base ---\n        this.clock = new $dyjou.Clock(false);\n        this.elapsedTime = 0.0;\n        this.scene = new $dyjou.Scene();\n        this.renderer = new $ilwiq.WebGLRenderer({\n            antialias: true\n        });\n        this.controls = null;\n        this.camera2D = null;\n        this.camera3D = null;\n        this.camera = null;\n        // --- Oggetti di scena ---\n        this.scale = 20; // Fattore di scala: 1 metro in fisica = 20 unità in Three.js\n        this.physics = new $8482652b5247a78d$var$HeronPhysics();\n        this.waterA = null;\n        this.waterB = null;\n        this.waterC = null;\n        this.fountainParticles = null;\n        this.particleVelocities = null;\n        this.particleCount = 1000;\n        this.textOverlay = null;\n        this.textGroups = {};\n        // --- Costanti di layout (scalate) ---\n        this.H_scaled = this.physics.H * this.scale;\n        this.h6_scaled = this.physics.h_6 * this.scale;\n        this.worldWidth = 10;\n        this.worldDepth = 6;\n        this.topBasinY = this.H_scaled;\n        this.topBasinHeight = 6;\n        this.initThree();\n        this.setupSceneGeometry();\n        this.setupGUI();\n        this.addTextLabels();\n        this.resetAll(); // Imposta lo stato iniziale\n        this.animate = this.animate.bind(this);\n        this.animate();\n    }\n    initThree() {\n        this.scene.background = new $ilwiq.Color(0x1a1a2a);\n        this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n        this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        this.renderer.shadowMap.enabled = true;\n        this.container.appendChild(this.renderer.domElement);\n        // --- Setup Doppia Camera ---\n        const aspect = this.container.clientWidth / this.container.clientHeight;\n        const viewSize = 15; // Dimensione della vista per la camera 2D\n        // Camera 2D (Ortografica)\n        this.camera2D = new $ilwiq.OrthographicCamera(-viewSize * aspect, viewSize * aspect, viewSize, -viewSize, 0.1, 100);\n        this.camera2D.position.set(0, 0, 50);\n        this.camera2D.lookAt(0, this.H_scaled, 0);\n        // Camera 3D (Prospettica)\n        this.camera3D = new $ilwiq.PerspectiveCamera(50, aspect, 0.1, 200);\n        this.camera3D.position.set(15, 12, 25);\n        this.camera3D.lookAt(0, this.H_scaled, 0);\n        this.camera = this.camera3D; // Inizia in modalità 3D\n        // Controlli 3D (OrbitControls)\n        this.controls = new (0, $5Rd1x.OrbitControls)(this.camera3D, this.renderer.domElement);\n        this.controls.enableDamping = true;\n        this.controls.dampingFactor = 0.05;\n        this.controls.target.set(0, this.H_scaled, 0);\n        this.controls.enabled = this.guiParams.viewMode === \"3D\";\n        // Luci\n        const ambientLight = new $dyjou.AmbientLight(0xffffff, 0.7);\n        this.scene.add(ambientLight);\n        const directionalLight = new $dyjou.DirectionalLight(0xffffff, 1.0);\n        directionalLight.position.set(10, 20, 15);\n        directionalLight.castShadow = true;\n        this.scene.add(directionalLight);\n        window.addEventListener(\"resize\", this.onWindowResize.bind(this));\n    }\n    setupSceneGeometry() {\n        // Materiali\n        const waterMaterial = new $dyjou.MeshPhysicalMaterial({\n            color: 0x2080ff,\n            transmission: 0.9,\n            thickness: 1.5 * this.scale,\n            roughness: 0.1,\n            ior: 1.33,\n            transparent: true,\n            side: $ilwiq.DoubleSide\n        });\n        const glassMaterial = new $dyjou.MeshPhysicalMaterial({\n            color: 0xffffff,\n            transmission: 0.95,\n            thickness: 0.5,\n            roughness: 0.05,\n            ior: 1.52,\n            transparent: true,\n            opacity: 0.3,\n            side: $ilwiq.DoubleSide\n        });\n        const pipeMaterial = new $dyjou.MeshStandardMaterial({\n            color: 0x909090,\n            roughness: 0.3,\n            metalness: 0.5\n        });\n        // Geometrie\n        const basinWidth = this.worldWidth / 2;\n        const basinDepth = this.worldDepth;\n        // --- Acqua (le altezze saranno aggiornate in 'animate') ---\n        // Usa una geometria di base 1x1x1 e la scala\n        const waterGeom = new $ilwiq.BoxGeometry(1, 1, 1);\n        this.waterA = new $ilwiq.Mesh(waterGeom, waterMaterial.clone());\n        this.waterA.scale.set(this.worldWidth, 1, basinDepth); // y-scale si aggiorna\n        this.scene.add(this.waterA);\n        this.waterB = new $ilwiq.Mesh(waterGeom, waterMaterial.clone());\n        this.waterB.scale.set(basinWidth, 1, basinDepth);\n        this.waterB.position.x = -basinWidth / 2;\n        this.scene.add(this.waterB);\n        this.waterC = new $ilwiq.Mesh(waterGeom, waterMaterial.clone());\n        this.waterC.scale.set(basinWidth, 1, basinDepth);\n        this.waterC.position.x = basinWidth / 2;\n        this.scene.add(this.waterC);\n        // --- Contenitori (Vetro) ---\n        const wallThickness = 0.2;\n        const createWall = (w, h, d, x, y, z)=>{\n            const geom = new $ilwiq.BoxGeometry(w, h, d);\n            const mesh = new $ilwiq.Mesh(geom, glassMaterial);\n            mesh.position.set(x, y, z);\n            this.scene.add(mesh);\n            return mesh;\n        };\n        // Pavimento B/C\n        createWall(this.worldWidth + wallThickness * 2, wallThickness, basinDepth + wallThickness * 2, 0, -wallThickness / 2, 0);\n        // Pavimento A / Soffitto B-C-D\n        createWall(this.worldWidth + wallThickness * 2, wallThickness, basinDepth + wallThickness * 2, 0, this.H_scaled, 0);\n        // Tetto A\n        createWall(this.worldWidth + wallThickness * 2, wallThickness, basinDepth + wallThickness * 2, 0, this.topBasinY + this.topBasinHeight, 0);\n        const totalHeight = this.topBasinY + this.topBasinHeight;\n        // Parete Sinistra\n        createWall(wallThickness, totalHeight, basinDepth + wallThickness, -this.worldWidth / 2 - wallThickness / 2, totalHeight / 2 - wallThickness / 2, 0);\n        // Parete Destra\n        createWall(wallThickness, totalHeight, basinDepth + wallThickness, this.worldWidth / 2 + wallThickness / 2, totalHeight / 2 - wallThickness / 2, 0);\n        // Parete Posteriore\n        createWall(this.worldWidth + wallThickness * 2, totalHeight, wallThickness, 0, totalHeight / 2 - wallThickness / 2, -basinDepth / 2 - wallThickness / 2);\n        // Parete Anteriore (Richiesta dall'utente)\n        createWall(this.worldWidth + wallThickness * 2, totalHeight, wallThickness, 0, totalHeight / 2 - wallThickness / 2, basinDepth / 2 + wallThickness / 2);\n        // *** CORREZIONE: Divisore B/C (con spazio per aria D) ***\n        const dividerHeight = this.H_scaled * 0.75; // Lascia 25% di spazio per l'aria (Camera D)\n        createWall(wallThickness, dividerHeight, basinDepth, 0, dividerHeight / 2, 0);\n        // --- Tubi ---\n        const pipeRadius = 0.2;\n        const createPipe = (height, x, y, z)=>{\n            const geom = new $dyjou.CylinderGeometry(pipeRadius, pipeRadius, height, 16);\n            const mesh = new $ilwiq.Mesh(geom, pipeMaterial);\n            mesh.position.set(x, y, z);\n            this.scene.add(mesh);\n            return mesh;\n        };\n        // *** CORREZIONE: Solo i due tubi corretti ***\n        // Tubo 1-4 (A -> B)\n        // Va da Y=0 (fondo B) a Y=H_scaled (fondo A)\n        createPipe(this.H_scaled, -basinWidth / 2, this.H_scaled / 2, 0);\n        // Tubo 5-6 (C -> A -> Jet)\n        // Va da Y=0 (fondo C) a Y=h6_scaled (punta del getto)\n        this.pipe56 = createPipe(this.h6_scaled, basinWidth / 2, this.h6_scaled / 2, 0);\n        // --- Sistema di Particelle (Getto) ---\n        const particleGeom = new $ilwiq.BufferGeometry();\n        const positions = new Float32Array(this.particleCount * 3);\n        this.particleVelocities = new Float32Array(this.particleCount * 3);\n        for(let i = 0; i < this.particleCount; i++){\n            positions[i * 3 + 0] = this.pipe56.position.x;\n            positions[i * 3 + 1] = this.h6_scaled;\n            positions[i * 3 + 2] = this.pipe56.position.z;\n        }\n        particleGeom.setAttribute(\"position\", new $ilwiq.BufferAttribute(positions, 3));\n        const particleMaterial = new $dyjou.PointsMaterial({\n            color: 0x80c0ff,\n            size: 0.15,\n            transparent: true,\n            opacity: 0.8,\n            blending: $ilwiq.AdditiveBlending\n        });\n        this.fountainParticles = new $dyjou.Points(particleGeom, particleMaterial);\n        this.scene.add(this.fountainParticles);\n    }\n    setupGUI() {\n        const gui = new (0, $9sWXr.default)({\n            title: \"Heron's Fountain Controls\"\n        });\n        gui.add(this.guiParams, \"playPause\").name(\"\\u25B6\\uFE0F / \\u23F8\\uFE0F Start/Pause\");\n        gui.add(this.guiParams, \"reset\").name(\"\\uD83D\\uDD04 Reset All\");\n        gui.add(this.guiParams, \"timeScale\", 0.1, 5.0, 0.1).name(\"Time Scale\");\n        gui.add(this.guiParams, \"viewMode\", [\n            \"2D\",\n            \"3D\"\n        ]).name(\"View Mode\").onChange((value)=>{\n            this.camera = value === \"2D\" ? this.camera2D : this.camera3D;\n            this.controls.enabled = value === \"3D\";\n            this.onWindowResize(); // Aggiorna l'aspect ratio\n        });\n    }\n    resetAll() {\n        this.guiParams.isRunning = false;\n        this.clock.stop();\n        this.elapsedTime = 0.0;\n        this.physics.reset();\n        // Resetta stato visuale\n        this.updateWaterMeshes();\n        // Resetta particelle\n        const positions = this.fountainParticles.geometry.getAttribute(\"position\");\n        const nozzleX = this.pipe56.position.x;\n        const nozzleY = this.h6_scaled;\n        const nozzleZ = this.pipe56.position.z;\n        for(let i = 0; i < this.particleCount; i++){\n            positions.array[i * 3 + 0] = nozzleX;\n            positions.array[i * 3 + 1] = nozzleY;\n            positions.array[i * 3 + 2] = nozzleZ;\n            this.particleVelocities[i * 3 + 0] = 0;\n            this.particleVelocities[i * 3 + 1] = 0;\n            this.particleVelocities[i * 3 + 2] = 0;\n        }\n        positions.needsUpdate = true;\n        // Aggiorna etichette\n        this.updateTextLabels();\n    }\n    handlePlayPause() {\n        if (this.guiParams.isRunning) {\n            if (this.physics.isStable) this.resetAll(); // Se era stabile, riparte da zero\n            this.guiParams.isRunning = true;\n            this.clock.start();\n        } else this.clock.stop();\n    }\n    updateWaterMeshes() {\n        const { h_A: h_A, h_B: h_B, h_C: h_C } = this.physics;\n        const s = this.scale;\n        const hA_s = Math.max(0.01, h_A * s);\n        const hB_s = Math.max(0.01, h_B * s);\n        const hC_s = Math.max(0.01, h_C * s);\n        // Acqua A (pavimento a H_scaled)\n        this.waterA.scale.y = hA_s;\n        this.waterA.position.y = this.H_scaled + hA_s / 2;\n        // Acqua B (pavimento a 0)\n        this.waterB.scale.y = hB_s;\n        this.waterB.position.y = hB_s / 2;\n        // Acqua C (pavimento a 0)\n        this.waterC.scale.y = hC_s;\n        this.waterC.position.y = hC_s / 2;\n    }\n    updateFountain(dt) {\n        const positions = this.fountainParticles.geometry.getAttribute(\"position\");\n        const vels = this.particleVelocities;\n        const gravity = this.physics.g * this.scale * 0.8; // Gravità scalata\n        const v4_scaled = this.physics.v4 * this.scale;\n        const nozzleX = this.pipe56.position.x;\n        const nozzleY = this.h6_scaled;\n        const nozzleZ = this.pipe56.position.z;\n        // Calcola il livello dell'acqua in A (dove atterrano le particelle)\n        const waterATop = this.waterA.position.y + this.waterA.scale.y / 2;\n        const basinAMinX = -this.worldWidth / 2;\n        const basinAMaxX = this.worldWidth / 2;\n        const basinAMinZ = -this.worldDepth / 2;\n        const basinAMaxZ = this.worldDepth / 2;\n        for(let i = 0; i < this.particleCount; i++){\n            const idx = i * 3;\n            let px = positions.array[idx];\n            let py = positions.array[idx + 1];\n            let pz = positions.array[idx + 2];\n            let vx = vels[idx];\n            let vy = vels[idx + 1];\n            let vz = vels[idx + 2];\n            // Controlla se la particella è \"morta\" (atterrata in A)\n            const isDead = py < waterATop && py > this.H_scaled && // Assicura sia sopra il pavimento di A\n            px > basinAMinX && px < basinAMaxX && pz > basinAMinZ && pz < basinAMaxZ;\n            if (isDead || this.guiParams.isRunning && this.physics.v4 <= 0 && py <= nozzleY) {\n                // Resuscita la particella all'ugello\n                px = nozzleX;\n                py = nozzleY;\n                pz = nozzleZ;\n                if (this.physics.v4 > 0) {\n                    // Spargimento realistico\n                    const angle = Math.random() * Math.PI * 2;\n                    const spread = 0.5;\n                    vx = Math.cos(angle) * spread * (Math.random() * 0.5 + 0.5);\n                    vy = v4_scaled * (Math.random() * 0.1 + 0.95); // Leggera variazione velocità\n                    vz = Math.sin(angle) * spread * (Math.random() * 0.5 + 0.5);\n                } else {\n                    vx = 0;\n                    vy = 0;\n                    vz = 0;\n                }\n            } else {\n                // Aggiorna particella viva\n                vy -= gravity * dt; // Applica gravità\n                px += vx * dt;\n                py += vy * dt;\n                pz += vz * dt;\n            }\n            positions.array[idx] = px;\n            positions.array[idx + 1] = py;\n            positions.array[idx + 2] = pz;\n            vels[idx] = vx;\n            vels[idx + 1] = vy;\n            vels[idx + 2] = vz;\n        }\n        positions.needsUpdate = true;\n    }\n    // --- Gestione UI e Finestra ---\n    addTextLabels() {\n        if (this.textOverlay) this.textOverlay.remove();\n        this.textOverlay = document.createElement(\"div\");\n        this.textOverlay.className = \"text-label-overlay\";\n        this.container.appendChild(this.textOverlay);\n        const createLabel = (id)=>{\n            const div = document.createElement(\"div\");\n            div.className = \"label-group\";\n            div.id = id;\n            this.textOverlay.appendChild(div);\n            return div;\n        };\n        this.textGroups.A = createLabel(\"label-A\");\n        this.textGroups.B = createLabel(\"label-B\");\n        this.textGroups.C = createLabel(\"label-C\");\n        this.textGroups.Time = createLabel(\"label-Time\");\n    }\n    toScreenPosition(vector3, camera, canvas) {\n        const width = canvas.clientWidth;\n        const height = canvas.clientHeight;\n        const vector = vector3.clone().project(camera);\n        vector.x = (vector.x + 1) / 2 * width;\n        vector.y = -(vector.y - 1) / 2 * height;\n        return {\n            x: vector.x,\n            y: vector.y\n        };\n    }\n    updateTextLabels() {\n        if (!this.textGroups.A) return;\n        const s = this.scale;\n        const canvas = this.renderer.domElement;\n        // Posizioni 3D per le etichette\n        const posA = new $ilwiq.Vector3(0, this.H_scaled + this.topBasinHeight - 1, 0);\n        const posB = new $ilwiq.Vector3(-this.worldWidth / 4, this.H_scaled - 1, 0);\n        const posC = new $ilwiq.Vector3(this.worldWidth / 4, this.H_scaled - 1, 0);\n        // Aggiorna posizione A\n        const screenPosA = this.toScreenPosition(posA, this.camera, canvas);\n        this.textGroups.A.style.left = `${screenPosA.x}px`;\n        this.textGroups.A.style.top = `${screenPosA.y}px`;\n        this.textGroups.A.innerHTML = `\n            <div>Bacino A</div>\n            <div>h_A: ${(this.physics.h_A * 100).toFixed(1)} cm</div>\n          `;\n        // Aggiorna posizione B\n        const screenPosB = this.toScreenPosition(posB, this.camera, canvas);\n        this.textGroups.B.style.left = `${screenPosB.x}px`;\n        this.textGroups.B.style.top = `${screenPosB.y}px`;\n        this.textGroups.B.innerHTML = `\n            <div>Bacino B</div>\n            <div>h_B: ${(this.physics.h_B * 100).toFixed(1)} cm</div>\n          `;\n        // Aggiorna posizione C\n        const screenPosC = this.toScreenPosition(posC, this.camera, canvas);\n        this.textGroups.C.style.left = `${screenPosC.x}px`;\n        this.textGroups.C.style.top = `${screenPosC.y}px`;\n        this.textGroups.C.innerHTML = `\n            <div>Bacino C</div>\n            <div>h_C: ${(this.physics.h_C * 100).toFixed(1)} cm</div>\n          `;\n        // Etichetta tempo\n        this.textGroups.Time.style.left = `50%`;\n        this.textGroups.Time.style.top = `20px`;\n        const status = this.physics.isStable ? \"STABILE\" : this.guiParams.isRunning ? \"RUNNING\" : \"PAUSED\";\n        this.textGroups.Time.innerHTML = `\n            <div>Tempo: ${this.physics.t.toFixed(2)} s</div>\n            <div>Stato: ${status}</div>\n          `;\n    }\n    onWindowResize() {\n        const aspect = this.container.clientWidth / this.container.clientHeight;\n        const viewSize = 15;\n        // Aggiorna Camera 2D\n        this.camera2D.left = -viewSize * aspect;\n        this.camera2D.right = viewSize * aspect;\n        this.camera2D.top = viewSize;\n        this.camera2D.bottom = -viewSize;\n        this.camera2D.updateProjectionMatrix();\n        // Aggiorna Camera 3D\n        this.camera3D.aspect = aspect;\n        this.camera3D.updateProjectionMatrix();\n        this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\n    }\n    animate() {\n        requestAnimationFrame(this.animate);\n        if (this.guiParams.viewMode === \"3D\") this.controls.update();\n        if (this.guiParams.isRunning) {\n            const delta = this.clock.getDelta() * this.guiParams.timeScale;\n            this.elapsedTime += delta;\n            if (!this.physics.isStable) {\n                this.physics.step(delta);\n                this.updateWaterMeshes();\n            } else {\n                // La fisica è stabile, ferma l'orologio\n                this.guiParams.isRunning = false;\n                this.clock.stop();\n            }\n            this.updateFountain(delta);\n        }\n        // Aggiorna le etichette sempre, anche da fermo, per il resize\n        this.updateTextLabels();\n        this.renderer.render(this.scene, this.camera);\n    }\n}\n// Inizializza la scena quando il DOM è pronto\ndocument.addEventListener(\"DOMContentLoaded\", ()=>{\n    try {\n        new $8482652b5247a78d$var$HeronFountainScene(\"scene-container\");\n    } catch (e) {\n        console.error(\"Impossibile inizializzare la scena:\", e);\n        document.getElementById(\"scene-container\").innerHTML = \"<h3>Errore during l'inizializzazione della simulazione.</h3><pre>\" + e.stack + \"</pre>\";\n    }\n});\n\n\n//# sourceMappingURL=heron_fountain_simulation.6bad5c04.js.map\n","import * as THREE from \"three\";\nimport GUI from \"lil-gui\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\n\n// =============================================================================\n      // PHYSICS IMPLEMENTATION (Ported from Python)\n      // =============================================================================\n\n      class HeronPhysics {\n        constructor() {\n          // --- Costanti dal codice Python ---\n          this.alpha = 1 / 1024;\n          this.beta = 1 / 502;\n          this.gamma = 1 / 502;\n          this.rho = 1000.0;\n          this.g = 9.8;\n          this.p_atm = 101325.0;\n\n          this.S_B = 0.0142;\n          this.S_C = 0.0142;\n          this.V_D0 = 0.00355;\n          this.h_B0_ref = 0.04; // Livello di riferimento, non iniziale\n          this.h_C0_ref = 0.21; // Livello di riferimento, non iniziale\n          this.h_6 = 0.33;\n          this.H = 0.25;\n\n          // Perdite viscose\n          this.eta = 0.001;\n          this.S = 0.0000285;\n          this.L1 = 0.22;\n          this.L2 = 0.31;\n          this.B1 = (8 * Math.PI * this.eta * this.L1) / this.S;\n          this.B2 = (8 * Math.PI * this.eta * this.L2) / this.S;\n\n          // --- Condizioni iniziali ---\n          this.y0 = [0.06, 0.04, 0.20]; // [h_A, h_B, h_C]\n\n          // --- Condizioni di stop ---\n          this.EPS_DHB = 1e-4;\n          this.T_GUARD = 10.0; // non attivare lo stop prima di 10 s\n\n          // --- Stato della simulazione ---\n          this.t = 0.0;\n          this.h_A = 0.0;\n          this.h_B = 0.0;\n          this.h_C = 0.0;\n          this.v4 = 0.0; // Velocità del getto (per la visualizzazione)\n          this.isStable = false;\n\n          this.reset();\n        }\n\n        reset() {\n          [this.h_A, this.h_B, this.h_C] = this.y0;\n          this.t = 0.0;\n          this.v4 = 0.0;\n          this.isStable = false;\n        }\n\n        /**\n         * Calcola le derivate [dhA_dt, dhB_dt, dhC_dt]\n         * @returns {number[]} Array delle derivate\n         */\n        system(h_A, h_B, h_C) {\n          const delta_V =\n            (this.h_B0_ref - h_B) * this.S_B +\n            (this.h_C0_ref - h_C) * this.S_C;\n          const V_D = this.V_D0 + delta_V;\n          const p_D = (this.p_atm * this.V_D0) / V_D;\n\n          const deltaP_AB =\n            this.p_atm - p_D + this.rho * this.g * (h_A + this.H - h_B);\n          const deltaP_C4 =\n            p_D - this.p_atm + this.rho * this.g * (h_C - this.h_6);\n\n          const v2 =\n            (-this.B1 +\n              Math.sqrt(this.B1 ** 2 + 2 * this.rho * Math.max(deltaP_AB, 0.0))) /\n            this.rho;\n          const v4 =\n            (-this.B2 +\n              Math.sqrt(this.B2 ** 2 + 2 * this.rho * Math.max(deltaP_C4, 0.0))) /\n            this.rho;\n\n          // Salva v4 per la visualizzazione\n          this.v4 = v4;\n\n          const dhA_dt = -this.alpha * v2 + this.alpha * v4;\n          const dhB_dt = this.beta * v2;\n          const dhC_dt = -this.gamma * v4;\n\n          return [dhA_dt, dhB_dt, dhC_dt];\n        }\n\n        /**\n         * Esegue un passo di integrazione (Metodo di Eulero)\n         * @param {number} dt - Il passo temporale (delta time)\n         */\n        step(dt) {\n          if (this.isStable) return;\n\n          const [dhA_dt, dhB_dt, dhC_dt] = this.system(\n            this.h_A,\n            this.h_B,\n            this.h_C\n          );\n\n          // Controlla la condizione di stop\n          if (this.t > this.T_GUARD && Math.abs(dhB_dt) < this.EPS_DHB) {\n            this.isStable = true;\n            this.v4 = 0; // Ferma il getto\n            return;\n          }\n\n          // Integrazione di Eulero\n          this.h_A += dhA_dt * dt;\n          this.h_B += dhB_dt * dt;\n          this.h_C += dhC_dt * dt;\n          this.t += dt;\n\n          // Assicura che i livelli non diventino negativi\n          this.h_A = Math.max(0, this.h_A);\n          this.h_B = Math.max(0, this.h_B);\n          this.h_C = Math.max(0, this.h_C);\n        }\n      }\n\n      // =============================================================================\n      // THREE.JS SCENE IMPLEMENTATION\n      // =============================================================================\n\n      class HeronFountainScene {\n        constructor(containerId = \"scene-container\") {\n          this.container = document.getElementById(containerId);\n          if (!this.container)\n            throw new Error(\n              `Container element with id '${containerId}' not found.`\n            );\n\n          this.guiParams = {\n            isRunning: false,\n            timeScale: 1.0,\n            viewMode: \"3D\",\n            playPause: () => {\n              this.guiParams.isRunning = !this.guiParams.isRunning;\n              this.handlePlayPause();\n            },\n            reset: () => {\n              this.resetAll();\n            },\n          };\n\n          // --- Setup di base ---\n          this.clock = new THREE.Clock(false);\n          this.elapsedTime = 0.0;\n          this.scene = new THREE.Scene();\n          this.renderer = new THREE.WebGLRenderer({ antialias: true });\n          this.controls = null;\n          this.camera2D = null;\n          this.camera3D = null;\n          this.camera = null;\n\n          // --- Oggetti di scena ---\n          this.scale = 20; // Fattore di scala: 1 metro in fisica = 20 unità in Three.js\n          this.physics = new HeronPhysics();\n          this.waterA = null;\n          this.waterB = null;\n          this.waterC = null;\n          this.fountainParticles = null;\n          this.particleVelocities = null;\n          this.particleCount = 1000;\n          this.textOverlay = null;\n          this.textGroups = {};\n\n          // --- Costanti di layout (scalate) ---\n          this.H_scaled = this.physics.H * this.scale;\n          this.h6_scaled = this.physics.h_6 * this.scale;\n          this.worldWidth = 10;\n          this.worldDepth = 6;\n          this.topBasinY = this.H_scaled;\n          this.topBasinHeight = 6;\n\n          this.initThree();\n          this.setupSceneGeometry();\n          this.setupGUI();\n          this.addTextLabels();\n          this.resetAll(); // Imposta lo stato iniziale\n\n          this.animate = this.animate.bind(this);\n          this.animate();\n        }\n\n        initThree() {\n          this.scene.background = new THREE.Color(0x1a1a2a);\n\n          this.renderer.setSize(\n            this.container.clientWidth,\n            this.container.clientHeight\n          );\n          this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n          this.renderer.shadowMap.enabled = true;\n          this.container.appendChild(this.renderer.domElement);\n\n          // --- Setup Doppia Camera ---\n          const aspect = this.container.clientWidth / this.container.clientHeight;\n          const viewSize = 15; // Dimensione della vista per la camera 2D\n\n          // Camera 2D (Ortografica)\n          this.camera2D = new THREE.OrthographicCamera(\n            -viewSize * aspect,\n            viewSize * aspect,\n            viewSize,\n            -viewSize,\n            0.1,\n            100\n          );\n          this.camera2D.position.set(0, 0, 50);\n          this.camera2D.lookAt(0, this.H_scaled, 0);\n\n          // Camera 3D (Prospettica)\n          this.camera3D = new THREE.PerspectiveCamera(50, aspect, 0.1, 200);\n          this.camera3D.position.set(15, 12, 25);\n          this.camera3D.lookAt(0, this.H_scaled, 0);\n\n          this.camera = this.camera3D; // Inizia in modalità 3D\n\n          // Controlli 3D (OrbitControls)\n          this.controls = new OrbitControls(\n            this.camera3D,\n            this.renderer.domElement\n          );\n          this.controls.enableDamping = true;\n          this.controls.dampingFactor = 0.05;\n          this.controls.target.set(0, this.H_scaled, 0);\n          this.controls.enabled = this.guiParams.viewMode === \"3D\";\n\n          // Luci\n          const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);\n          this.scene.add(ambientLight);\n\n          const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);\n          directionalLight.position.set(10, 20, 15);\n          directionalLight.castShadow = true;\n          this.scene.add(directionalLight);\n\n          window.addEventListener(\"resize\", this.onWindowResize.bind(this));\n        }\n\n        setupSceneGeometry() {\n          // Materiali\n          const waterMaterial = new THREE.MeshPhysicalMaterial({\n            color: 0x2080ff,\n            transmission: 0.9,\n            thickness: 1.5 * this.scale,\n            roughness: 0.1,\n            ior: 1.33,\n            transparent: true,\n            side: THREE.DoubleSide,\n          });\n\n          const glassMaterial = new THREE.MeshPhysicalMaterial({\n            color: 0xffffff,\n            transmission: 0.95,\n            thickness: 0.5,\n            roughness: 0.05,\n            ior: 1.52,\n            transparent: true,\n            opacity: 0.3,\n            side: THREE.DoubleSide,\n          });\n\n          const pipeMaterial = new THREE.MeshStandardMaterial({\n            color: 0x909090,\n            roughness: 0.3,\n            metalness: 0.5,\n          });\n\n          // Geometrie\n          const basinWidth = this.worldWidth / 2;\n          const basinDepth = this.worldDepth;\n\n          // --- Acqua (le altezze saranno aggiornate in 'animate') ---\n          // Usa una geometria di base 1x1x1 e la scala\n          const waterGeom = new THREE.BoxGeometry(1, 1, 1);\n          this.waterA = new THREE.Mesh(waterGeom, waterMaterial.clone());\n          this.waterA.scale.set(this.worldWidth, 1, basinDepth); // y-scale si aggiorna\n          this.scene.add(this.waterA);\n\n          this.waterB = new THREE.Mesh(waterGeom, waterMaterial.clone());\n          this.waterB.scale.set(basinWidth, 1, basinDepth);\n          this.waterB.position.x = -basinWidth / 2;\n          this.scene.add(this.waterB);\n\n          this.waterC = new THREE.Mesh(waterGeom, waterMaterial.clone());\n          this.waterC.scale.set(basinWidth, 1, basinDepth);\n          this.waterC.position.x = basinWidth / 2;\n          this.scene.add(this.waterC);\n\n          // --- Contenitori (Vetro) ---\n          const wallThickness = 0.2;\n          const createWall = (w, h, d, x, y, z) => {\n            const geom = new THREE.BoxGeometry(w, h, d);\n            const mesh = new THREE.Mesh(geom, glassMaterial);\n            mesh.position.set(x, y, z);\n            this.scene.add(mesh);\n            return mesh;\n          };\n\n          // Pavimento B/C\n          createWall(\n            this.worldWidth + wallThickness * 2,\n            wallThickness,\n            basinDepth + wallThickness * 2,\n            0,\n            -wallThickness / 2,\n            0\n          );\n          // Pavimento A / Soffitto B-C-D\n          createWall(\n            this.worldWidth + wallThickness * 2,\n            wallThickness,\n            basinDepth + wallThickness * 2,\n            0,\n            this.H_scaled,\n            0\n          );\n          // Tetto A\n          createWall(\n            this.worldWidth + wallThickness * 2,\n            wallThickness,\n            basinDepth + wallThickness * 2,\n            0,\n            this.topBasinY + this.topBasinHeight,\n            0\n          );\n\n          const totalHeight = this.topBasinY + this.topBasinHeight;\n          // Parete Sinistra\n          createWall(\n            wallThickness,\n            totalHeight,\n            basinDepth + wallThickness,\n            -this.worldWidth / 2 - wallThickness / 2,\n            totalHeight / 2 - wallThickness / 2,\n            0\n          );\n          // Parete Destra\n          createWall(\n            wallThickness,\n            totalHeight,\n            basinDepth + wallThickness,\n            this.worldWidth / 2 + wallThickness / 2,\n            totalHeight / 2 - wallThickness / 2,\n            0\n          );\n          // Parete Posteriore\n          createWall(\n            this.worldWidth + wallThickness * 2,\n            totalHeight,\n            wallThickness,\n            0,\n            totalHeight / 2 - wallThickness / 2,\n            -basinDepth / 2 - wallThickness / 2\n          );\n          // Parete Anteriore (Richiesta dall'utente)\n          createWall(\n            this.worldWidth + wallThickness * 2,\n            totalHeight,\n            wallThickness,\n            0,\n            totalHeight / 2 - wallThickness / 2,\n            basinDepth / 2 + wallThickness / 2\n          );\n\n          // *** CORREZIONE: Divisore B/C (con spazio per aria D) ***\n          const dividerHeight = this.H_scaled * 0.75; // Lascia 25% di spazio per l'aria (Camera D)\n          createWall(\n            wallThickness,\n            dividerHeight, // Altezza ridotta\n            basinDepth,\n            0,\n            dividerHeight / 2, // Posizione Y centrata sulla nuova altezza\n            0\n          );\n\n          // --- Tubi ---\n          const pipeRadius = 0.2;\n          const createPipe = (height, x, y, z) => {\n            const geom = new THREE.CylinderGeometry(\n              pipeRadius,\n              pipeRadius,\n              height,\n              16\n            );\n            const mesh = new THREE.Mesh(geom, pipeMaterial);\n            mesh.position.set(x, y, z);\n            this.scene.add(mesh);\n            return mesh;\n          };\n\n          // *** CORREZIONE: Solo i due tubi corretti ***\n\n          // Tubo 1-4 (A -> B)\n          // Va da Y=0 (fondo B) a Y=H_scaled (fondo A)\n          createPipe(this.H_scaled, -basinWidth / 2, this.H_scaled / 2, 0);\n\n          // Tubo 5-6 (C -> A -> Jet)\n          // Va da Y=0 (fondo C) a Y=h6_scaled (punta del getto)\n          this.pipe56 = createPipe(\n            this.h6_scaled,\n            basinWidth / 2,\n            this.h6_scaled / 2,\n            0\n          );\n\n          // --- Sistema di Particelle (Getto) ---\n          const particleGeom = new THREE.BufferGeometry();\n          const positions = new Float32Array(this.particleCount * 3);\n          this.particleVelocities = new Float32Array(this.particleCount * 3);\n\n          for (let i = 0; i < this.particleCount; i++) {\n            positions[i * 3 + 0] = this.pipe56.position.x;\n            positions[i * 3 + 1] = this.h6_scaled;\n            positions[i * 3 + 2] = this.pipe56.position.z;\n          }\n\n          particleGeom.setAttribute(\n            \"position\",\n            new THREE.BufferAttribute(positions, 3)\n          );\n          const particleMaterial = new THREE.PointsMaterial({\n            color: 0x80c0ff,\n            size: 0.15,\n            transparent: true,\n            opacity: 0.8,\n            blending: THREE.AdditiveBlending,\n          });\n\n          this.fountainParticles = new THREE.Points(\n            particleGeom,\n            particleMaterial\n          );\n          this.scene.add(this.fountainParticles);\n        }\n\n        setupGUI() {\n          const gui = new GUI({ title: \"Heron's Fountain Controls\" });\n          gui.add(this.guiParams, \"playPause\").name(\"▶️ / ⏸️ Start/Pause\");\n          gui.add(this.guiParams, \"reset\").name(\"🔄 Reset All\");\n          gui\n            .add(this.guiParams, \"timeScale\", 0.1, 5.0, 0.1)\n            .name(\"Time Scale\");\n          gui\n            .add(this.guiParams, \"viewMode\", [\"2D\", \"3D\"])\n            .name(\"View Mode\")\n            .onChange((value) => {\n              this.camera = value === \"2D\" ? this.camera2D : this.camera3D;\n              this.controls.enabled = value === \"3D\";\n              this.onWindowResize(); // Aggiorna l'aspect ratio\n            });\n        }\n\n        resetAll() {\n          this.guiParams.isRunning = false;\n          this.clock.stop();\n          this.elapsedTime = 0.0;\n          this.physics.reset();\n\n          // Resetta stato visuale\n          this.updateWaterMeshes();\n\n          // Resetta particelle\n          const positions =\n            this.fountainParticles.geometry.getAttribute(\"position\");\n          const nozzleX = this.pipe56.position.x;\n          const nozzleY = this.h6_scaled;\n          const nozzleZ = this.pipe56.position.z;\n\n          for (let i = 0; i < this.particleCount; i++) {\n            positions.array[i * 3 + 0] = nozzleX;\n            positions.array[i * 3 + 1] = nozzleY;\n            positions.array[i * 3 + 2] = nozzleZ;\n            this.particleVelocities[i * 3 + 0] = 0;\n            this.particleVelocities[i * 3 + 1] = 0;\n            this.particleVelocities[i * 3 + 2] = 0;\n          }\n          positions.needsUpdate = true;\n\n          // Aggiorna etichette\n          this.updateTextLabels();\n        }\n\n        handlePlayPause() {\n          if (this.guiParams.isRunning) {\n            if (this.physics.isStable) {\n              this.resetAll(); // Se era stabile, riparte da zero\n            }\n            this.guiParams.isRunning = true;\n            this.clock.start();\n          } else {\n            this.clock.stop();\n          }\n        }\n\n        updateWaterMeshes() {\n          const { h_A, h_B, h_C } = this.physics;\n          const s = this.scale;\n\n          const hA_s = Math.max(0.01, h_A * s);\n          const hB_s = Math.max(0.01, h_B * s);\n          const hC_s = Math.max(0.01, h_C * s);\n\n          // Acqua A (pavimento a H_scaled)\n          this.waterA.scale.y = hA_s;\n          this.waterA.position.y = this.H_scaled + hA_s / 2;\n\n          // Acqua B (pavimento a 0)\n          this.waterB.scale.y = hB_s;\n          this.waterB.position.y = hB_s / 2;\n\n          // Acqua C (pavimento a 0)\n          this.waterC.scale.y = hC_s;\n          this.waterC.position.y = hC_s / 2;\n        }\n\n        updateFountain(dt) {\n          const positions =\n            this.fountainParticles.geometry.getAttribute(\"position\");\n          const vels = this.particleVelocities;\n          const gravity = this.physics.g * this.scale * 0.8; // Gravità scalata\n          const v4_scaled = this.physics.v4 * this.scale;\n\n          const nozzleX = this.pipe56.position.x;\n          const nozzleY = this.h6_scaled;\n          const nozzleZ = this.pipe56.position.z;\n\n          // Calcola il livello dell'acqua in A (dove atterrano le particelle)\n          const waterATop = this.waterA.position.y + this.waterA.scale.y / 2;\n          const basinAMinX = -this.worldWidth / 2;\n          const basinAMaxX = this.worldWidth / 2;\n          const basinAMinZ = -this.worldDepth / 2;\n          const basinAMaxZ = this.worldDepth / 2;\n\n          for (let i = 0; i < this.particleCount; i++) {\n            const idx = i * 3;\n            let px = positions.array[idx];\n            let py = positions.array[idx + 1];\n            let pz = positions.array[idx + 2];\n\n            let vx = vels[idx];\n            let vy = vels[idx + 1];\n            let vz = vels[idx + 2];\n\n            // Controlla se la particella è \"morta\" (atterrata in A)\n            const isDead =\n              py < waterATop &&\n              py > this.H_scaled && // Assicura sia sopra il pavimento di A\n              px > basinAMinX &&\n              px < basinAMaxX &&\n              pz > basinAMinZ &&\n              pz < basinAMaxZ;\n\n            if (isDead || (this.guiParams.isRunning && this.physics.v4 <= 0 && py <= nozzleY)) {\n              // Resuscita la particella all'ugello\n              px = nozzleX;\n              py = nozzleY;\n              pz = nozzleZ;\n\n              if (this.physics.v4 > 0) {\n                 // Spargimento realistico\n                const angle = Math.random() * Math.PI * 2;\n                const spread = 0.5;\n                vx = Math.cos(angle) * spread * (Math.random() * 0.5 + 0.5);\n                vy = v4_scaled * (Math.random() * 0.1 + 0.95); // Leggera variazione velocità\n                vz = Math.sin(angle) * spread * (Math.random() * 0.5 + 0.5);\n              } else {\n                vx = 0; vy = 0; vz = 0;\n              }\n\n            } else {\n              // Aggiorna particella viva\n              vy -= gravity * dt; // Applica gravità\n              px += vx * dt;\n              py += vy * dt;\n              pz += vz * dt;\n            }\n\n            positions.array[idx] = px;\n            positions.array[idx + 1] = py;\n            positions.array[idx + 2] = pz;\n            vels[idx] = vx;\n            vels[idx + 1] = vy;\n            vels[idx + 2] = vz;\n          }\n          positions.needsUpdate = true;\n        }\n\n        // --- Gestione UI e Finestra ---\n\n        addTextLabels() {\n          if (this.textOverlay) this.textOverlay.remove();\n\n          this.textOverlay = document.createElement(\"div\");\n          this.textOverlay.className = \"text-label-overlay\";\n          this.container.appendChild(this.textOverlay);\n\n          const createLabel = (id) => {\n            const div = document.createElement(\"div\");\n            div.className = \"label-group\";\n            div.id = id;\n            this.textOverlay.appendChild(div);\n            return div;\n          };\n\n          this.textGroups.A = createLabel(\"label-A\");\n          this.textGroups.B = createLabel(\"label-B\");\n          this.textGroups.C = createLabel(\"label-C\");\n          this.textGroups.Time = createLabel(\"label-Time\");\n        }\n\n        toScreenPosition(vector3, camera, canvas) {\n          const width = canvas.clientWidth;\n          const height = canvas.clientHeight;\n          const vector = vector3.clone().project(camera);\n          vector.x = ((vector.x + 1) / 2) * width;\n          vector.y = (-(vector.y - 1) / 2) * height;\n          return { x: vector.x, y: vector.y };\n        }\n\n        updateTextLabels() {\n          if (!this.textGroups.A) return;\n\n          const s = this.scale;\n          const canvas = this.renderer.domElement;\n\n          // Posizioni 3D per le etichette\n          const posA = new THREE.Vector3(0, this.H_scaled + this.topBasinHeight - 1, 0);\n          const posB = new THREE.Vector3(-this.worldWidth / 4, this.H_scaled - 1, 0);\n          const posC = new THREE.Vector3(this.worldWidth / 4, this.H_scaled - 1, 0);\n\n          // Aggiorna posizione A\n          const screenPosA = this.toScreenPosition(posA, this.camera, canvas);\n          this.textGroups.A.style.left = `${screenPosA.x}px`;\n          this.textGroups.A.style.top = `${screenPosA.y}px`;\n          this.textGroups.A.innerHTML = `\n            <div>Bacino A</div>\n            <div>h_A: ${(this.physics.h_A * 100).toFixed(1)} cm</div>\n          `;\n\n          // Aggiorna posizione B\n          const screenPosB = this.toScreenPosition(posB, this.camera, canvas);\n          this.textGroups.B.style.left = `${screenPosB.x}px`;\n          this.textGroups.B.style.top = `${screenPosB.y}px`;\n          this.textGroups.B.innerHTML = `\n            <div>Bacino B</div>\n            <div>h_B: ${(this.physics.h_B * 100).toFixed(1)} cm</div>\n          `;\n\n          // Aggiorna posizione C\n          const screenPosC = this.toScreenPosition(posC, this.camera, canvas);\n          this.textGroups.C.style.left = `${screenPosC.x}px`;\n          this.textGroups.C.style.top = `${screenPosC.y}px`;\n          this.textGroups.C.innerHTML = `\n            <div>Bacino C</div>\n            <div>h_C: ${(this.physics.h_C * 100).toFixed(1)} cm</div>\n          `;\n\n          // Etichetta tempo\n          this.textGroups.Time.style.left = `50%`;\n          this.textGroups.Time.style.top = `20px`;\n          const status = this.physics.isStable ? \"STABILE\" : (this.guiParams.isRunning ? \"RUNNING\" : \"PAUSED\");\n          this.textGroups.Time.innerHTML = `\n            <div>Tempo: ${this.physics.t.toFixed(2)} s</div>\n            <div>Stato: ${status}</div>\n          `;\n        }\n\n        onWindowResize() {\n          const aspect = this.container.clientWidth / this.container.clientHeight;\n          const viewSize = 15;\n\n          // Aggiorna Camera 2D\n          this.camera2D.left = -viewSize * aspect;\n          this.camera2D.right = viewSize * aspect;\n          this.camera2D.top = viewSize;\n          this.camera2D.bottom = -viewSize;\n          this.camera2D.updateProjectionMatrix();\n\n          // Aggiorna Camera 3D\n          this.camera3D.aspect = aspect;\n          this.camera3D.updateProjectionMatrix();\n\n          this.renderer.setSize(\n            this.container.clientWidth,\n            this.container.clientHeight\n          );\n        }\n\n        animate() {\n          requestAnimationFrame(this.animate);\n\n          if (this.guiParams.viewMode === \"3D\") {\n            this.controls.update();\n          }\n\n          if (this.guiParams.isRunning) {\n            const delta = this.clock.getDelta() * this.guiParams.timeScale;\n            this.elapsedTime += delta;\n\n            if (!this.physics.isStable) {\n              this.physics.step(delta);\n              this.updateWaterMeshes();\n            } else {\n              // La fisica è stabile, ferma l'orologio\n              this.guiParams.isRunning = false;\n              this.clock.stop();\n            }\n            \n            this.updateFountain(delta);\n          }\n          \n          // Aggiorna le etichette sempre, anche da fermo, per il resize\n          this.updateTextLabels();\n          this.renderer.render(this.scene, this.camera);\n        }\n      }\n\n      // Inizializza la scena quando il DOM è pronto\n      document.addEventListener(\"DOMContentLoaded\", () => {\n        try {\n          new HeronFountainScene(\"scene-container\");\n        } catch (e) {\n          console.error(\"Impossibile inizializzare la scena:\", e);\n          document.getElementById(\"scene-container\").innerHTML =\n            \"<h3>Errore during l'inizializzazione della simulazione.</h3><pre>\" +\n            e.stack +\n            \"</pre>\";\n        }\n      });"],"names":["$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","$ilwiq","$dyjou","$9sWXr","$5Rd1x","$8482652b5247a78d$var$HeronPhysics","alpha","beta","gamma","rho","g","p_atm","S_B","S_C","V_D0","h_B0_ref","h_C0_ref","h_6","H","eta","S","L1","L2","B1","Math","PI","B2","y0","EPS_DHB","T_GUARD","t","h_A","h_B","h_C","v4","isStable","reset","system","delta_V","V_D","p_D","deltaP_AB","deltaP_C4","v2","sqrt","max","dhA_dt","step","dt","dhB_dt","dhC_dt","abs","$8482652b5247a78d$var$HeronFountainScene","containerId","container","document","getElementById","guiParams","isRunning","timeScale","viewMode","playPause","handlePlayPause","resetAll","clock","Clock","elapsedTime","scene","Scene","renderer","WebGLRenderer","antialias","controls","camera2D","camera3D","camera","scale","physics","waterA","waterB","waterC","fountainParticles","particleVelocities","particleCount","textOverlay","textGroups","H_scaled","h6_scaled","worldWidth","worldDepth","topBasinY","topBasinHeight","initThree","setupSceneGeometry","setupGUI","addTextLabels","animate","bind","background","Color","setSize","clientWidth","clientHeight","setPixelRatio","min","window","devicePixelRatio","shadowMap","enabled","appendChild","domElement","aspect","OrthographicCamera","viewSize","position","set","lookAt","PerspectiveCamera","OrbitControls","enableDamping","dampingFactor","target","ambientLight","AmbientLight","add","directionalLight","DirectionalLight","castShadow","addEventListener","onWindowResize","waterMaterial","MeshPhysicalMaterial","color","transmission","thickness","roughness","ior","transparent","side","DoubleSide","glassMaterial","opacity","pipeMaterial","MeshStandardMaterial","metalness","basinWidth","basinDepth","waterGeom","BoxGeometry","Mesh","clone","x","createWall","w","h","d","y","z","geom","mesh","wallThickness","totalHeight","dividerHeight","createPipe","height","CylinderGeometry","pipe56","particleGeom","BufferGeometry","positions","Float32Array","i","setAttribute","BufferAttribute","particleMaterial","PointsMaterial","size","blending","AdditiveBlending","Points","gui","default","title","name","onChange","value","stop","updateWaterMeshes","geometry","getAttribute","nozzleX","nozzleY","nozzleZ","array","needsUpdate","updateTextLabels","start","s","hA_s","hB_s","hC_s","updateFountain","vels","gravity","v4_scaled","waterATop","basinAMinX","basinAMaxX","basinAMinZ","basinAMaxZ","idx","px","py","pz","vx","vy","vz","isDead","angle","random","cos","sin","remove","createElement","className","createLabel","div","A","B","C","Time","toScreenPosition","vector3","canvas","width","vector","project","posA","Vector3","posB","posC","screenPosA","style","left","top","innerHTML","toFixed","screenPosB","screenPosC","status","right","bottom","updateProjectionMatrix","requestAnimationFrame","update","delta","getDelta","render","e","console","error","stack"],"version":3,"file":"heron_fountain_simulation.6bad5c04.js.map"}